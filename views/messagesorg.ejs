
    <style>
      :root {
        --travel-width: 8px;
        --item-width: 87px;
      }
      #navBg {
        width: var(--item-width);
        left: var(--travel-width);
        transition-property: all;
        transition-duration: 0.3s;
        transition-timing-function: ease;
        transition-delay: 0;
      }
      .active {

        color: white;
      }
      #navBg.active {
        width: var(--item-width);
        left: var(--travel-width);
      }

      #moreBox {
        width: fit-content;
        top: 6.8rem;
        right: -8rem;
        transition: right, width;
        transition-duration: 0.4s;
        transition-timing-function: ease;
      }

      #moreBox.active {
        right: 0;
      }
    </style>

<nav class="px-6 py-10 space-y-4 bg-white">
  <div class="flex justify-start items-center gap-2 text-black">
      <div class="flex justify-start items-center gap-0.5  ">
          <svg  xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5">
              <path stroke-linecap="round" stroke-linejoin="round" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" />
            </svg>
          <input placeholder="Search Messages..." type="text" class="w-4/5 bg-transparent outline-none ">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5">
              <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-9.75 0h9.75" />
            </svg>
      </div>
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5">
          <path stroke-linecap="round" stroke-linejoin="round" d="M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0" />
        </svg>
      </div>

      <div class="flex justify-center items-start h-8">
<div class="w-1/2 flex flex-col  items-center justify-start h-full">
  <h3 class="h-full ">Messages</h3>
  <div class="w-full  bg-blf h-1"></div>
</div>
<div class="w-1/2 flex flex-col  items-center justify-start h-full">
  <h3 class="h-full ">Requests</h3>
  <div class="w-full  h-1"></div>
 
</div>
      </div>
</nav>


<section id="mid">
  <section class="h-2/6 space-y-3">

    <header class="px-2 pb-1 flex flex-col space-y-3 mt-2">
      <div class="flex justify-between items-center">
        <img class="h-12 ml-1" src="/img/logo.png" alt="">
        <div class="flex gap-5 items-center">
          <img src="/img/plus.png" onclick="redirect()" class="plus w-5 h-5 cursor-pointer"  alt="">
            <img src="/img/more.png" onclick="" class="more w-5 h-5" alt="More" />
        </div>
      </div>
       <!-- Search Box  to search chats -->
       <div id="searchBox" class="w-full  ">
        <div
          class="w-full h-fit flex justify-between items-center  shadow-md shadow-gray-300  rounded-full   ring-1 ring-black ps-2 pr-4"
        >
          <input
            type="text"
            name=""
            id=""
            placeholder="Search..."
            class="placeholder-black text-black w-full ml-0.5 h-8 text-sm bg-transparent rounded-full px-1 outline-none text-Poppins-SemiBol"
          />
          <div class="flex justify-center items-center gap-1">
            <img class="w-4 h-4" src="/img/search.webp" alt="emoji" />
            
          </div>
        </div>
      </div>

     </header>
     <!-- <hr class="border-t-[1px] border-gray-200  rounded-full shadow-sm shadow-gray-300  w-11/12 self-center"> -->
     <div class="flex justify-center">
      <div
        id="outer"
        class="w-full h-7 rounded-full flex justify-start gap-3 px-2 relative"
      >
        <span
          id="navBg"
          class="h-7 bg-black shadow-sm shadow-gray-500 absolute rounded-full top-0 "
        ></span>
        <div
          class="navBtnBox active text-black w-fit flex items-center justify-center z-10"
        >
          <button class="navBtn text-xs px-4 ">Messages</button>
        </div>
        <div
          class="navBtnBox text-black w-fit flex items-center justify-center z-10"
        >
          <button class="navBtn text-xs px-4 font-[Roboto] font-bold">Requests</button>
        </div>
      </div>
    </div>
  </section>
      <section class="h-4/6 space-y-2 overflow-y-scroll ">
        <!-- Content comes when click on 3 dots in the top right side -->
        <div id="moreBox"
          class="z-40 py-5 shadow-lg shadow-pink-300 bg-white rounded-md absolute "
        >
          <div
            class="text-sm font-semibold text-black flex flex-col gap-3 justify-center items-start px-4"
          >
            <button>Your Profile</button>
            <button>New Chat</button>
            <button>Create Group</button>
            <button>Log Out</button>
          </div>
        </div>


        <!-- List of people with whom  user doing chat -->
        <% if (friendData.length > 0) { %>
         <div class=" flex flex-col space-y-5 ">
          <% friendData.forEach(friend => {  %>
           <% if (friend.state == "connected") { %>
            
        
  <div id="<%= friend.chatId %>"  class="messageId rounded-md flex justify-between items-center px-2 py-1.5 relative bg-red-600">
    <div class="flex justify-center gap-2">
      <img
        class="profilePic w-12 h-12 rounded-full"
        src="/img/<%= friend.profilePic %>"
        alt=""
      />
      <div class="flex flex-col items-start justify-center gap-0.5">
        <h1 class="name text-sm font-semibold"><%= friend.name %></h1>
        <div
          class=" lastText overflow-hidden whitespace-nowrap text-ellipsis max-w-36 w-36 text-xs text-gray-400"
        >
          Would you support me when nobody will come to save me , Krishna
        </div>
      </div>
    </div>
    <div class="flex flex-col items-center justify-center gap-0.5">
      <p class="text-xs text-gray-400 font-semibold">12:14</p>
      <div
        class="bg-black text-white rounded-full w-5 h-5 text-center flex items-center justify-center"
      >
        <p class="text-xs text-white font-sans font-semibold">2</p>
      </div>
    </div>

    <div
      class="absolute bottom-0 w-4/5  border-b right-1 rounded-full"
    ></div>
  </div>
  <% } %>
  <% })}  %>
 
         </div>
      </section>
</section>


   

   
      <div class="absolute bottom-8 w-full px-6 h-16 text-center">
        <div
          class="relative flex justify-around items-center bg-white border border-blb py-4 rounded-full h-full"
        >
        <!-- Plus Anything, aboslute with above div  -->
        <button id="plsBt" type="button"  class="absolute -top-8 left-1/2 -inset-0 -translate-x-1/2  bg-blf shadow-md shadow-blf text-center flex justify-center items-center rounded-full h-10 w-10 ">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6 text-white">
              <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
            </svg>
        </button>
          <a id="msgBt"  href="" class="footAnc flex flex-col items-center justify-center w-1/3">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              fill="currentColor"
              class="w-6 h-6"
            >
              <path
                fill-rule="evenodd"
                d="M4.804 21.644A6.707 6.707 0 0 0 6 21.75a6.721 6.721 0 0 0 3.583-1.029c.774.182 1.584.279 2.417.279 5.322 0 9.75-3.97 9.75-9 0-5.03-4.428-9-9.75-9s-9.75 3.97-9.75 9c0 2.409 1.025 4.587 2.674 6.192.232.226.277.428.254.543a3.73 3.73 0 0 1-.814 1.686.75.75 0 0 0 .44 1.223ZM8.25 10.875a1.125 1.125 0 1 0 0 2.25 1.125 1.125 0 0 0 0-2.25ZM10.875 12a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0Zm4.875-1.125a1.125 1.125 0 1 0 0 2.25 1.125 1.125 0 0 0 0-2.25Z"
                clip-rule="evenodd"
              />
            </svg>
            <p class="text-[8px] ">Messages</p>
          </a>
      
          <div class="bg-blb w-[1px] h-full"></div>
          <a id="quoteBt" href="" class="footAnc flex flex-col items-center justify-center w-1/3">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              fill="currentColor"
              class="w-6 h-6 "
            >
              <path
                fill-rule="evenodd"
                d="M7.502 6h7.128A3.375 3.375 0 0 1 18 9.375v9.375a3 3 0 0 0 3-3V6.108c0-1.505-1.125-2.811-2.664-2.94a48.972 48.972 0 0 0-.673-.05A3 3 0 0 0 15 1.5h-1.5a3 3 0 0 0-2.663 1.618c-.225.015-.45.032-.673.05C8.662 3.295 7.554 4.542 7.502 6ZM13.5 3A1.5 1.5 0 0 0 12 4.5h4.5A1.5 1.5 0 0 0 15 3h-1.5Z"
                clip-rule="evenodd"
              />
              <path
                fill-rule="evenodd"
                d="M3 9.375C3 8.339 3.84 7.5 4.875 7.5h9.75c1.036 0 1.875.84 1.875 1.875v11.25c0 1.035-.84 1.875-1.875 1.875h-9.75A1.875 1.875 0 0 1 3 20.625V9.375ZM6 12a.75.75 0 0 1 .75-.75h.008a.75.75 0 0 1 .75.75v.008a.75.75 0 0 1-.75.75H6.75a.75.75 0 0 1-.75-.75V12Zm2.25 0a.75.75 0 0 1 .75-.75h3.75a.75.75 0 0 1 0 1.5H9a.75.75 0 0 1-.75-.75ZM6 15a.75.75 0 0 1 .75-.75h.008a.75.75 0 0 1 .75.75v.008a.75.75 0 0 1-.75.75H6.75a.75.75 0 0 1-.75-.75V15Zm2.25 0a.75.75 0 0 1 .75-.75h3.75a.75.75 0 0 1 0 1.5H9a.75.75 0 0 1-.75-.75ZM6 18a.75.75 0 0 1 .75-.75h.008a.75.75 0 0 1 .75.75v.008a.75.75 0 0 1-.75.75H6.75a.75.75 0 0 1-.75-.75V18Zm2.25 0a.75.75 0 0 1 .75-.75h3.75a.75.75 0 0 1 0 1.5H9a.75.75 0 0 1-.75-.75Z"
                clip-rule="evenodd"
              />
            </svg>
            <p class="text-[8px]">Quotes</p>
          </a>
      
          <div class="bg-blb w-[1px] h-full"></div>
      
          <button id="moreBt" type="button" class="flex flex-col items-center justify-center w-1/3">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              fill="currentColor"
              class="w-6"
            >
              <path
                fill-rule="evenodd"
                d="M3 6.75A.75.75 0 0 1 3.75 6h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 6.75ZM3 12a.75.75 0 0 1 .75-.75H12a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 12Zm0 5.25a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75a.75.75 0 0 1-.75-.75Z"
                clip-rule="evenodd"
              />
            </svg>
            <p class="text-[8px]">More</p>
          </button>
        </div>
      </div>
  
      <!-- <script>
      const footAnc = document.querySelectorAll('.footAnc');
      const plsBt = document.getElementById('plsBt');
      const moreBt = document.getElementById('plsBt');
      
      const currentPath = window.location.pathname;
      footAnc.forEach(el => {
          if(el.getAttribute('href') == currentPath){
              el.children[0].classList.add('text-blf');
      el.children[1].classList.add('text-blf');
          }
      });
      
      footAnc.forEach(el => {
      el.addEventListener('click', (event)=>{
          event.preventDefault();
          console.log(event.target.closest('.footAnc'));
      el.children[0].classList.add('text-blf');
      el.children[1].classList.add('text-blf');
      footAnc.forEach(el2 => {
          console.log(event.target.closest('.footAnc'));
       if(event.target.closest('.footAnc') != el2){
          el2.children[0].classList.remove('text-blf');
          el2.children[1].classList.remove('text-blf');
       }
      });
      window.location.href ='/messages';
          });
      
      });
      
      </script> -->
    
    <script>
      function redirect(){
window.location.href = '/newChat'
      };
const messageIdBtn = document.querySelectorAll('.messageId');

messageIdBtn.forEach(btn =>{

  btn.addEventListener('click', (event)=>{
    // to avoid recognzaton of click on childs
    if (event.target.closest('.messageId')) {
    
      
// getting parent div
const messageDiv = event.target.closest('.messageId');

// getting  uid 
const rid = messageDiv.getAttribute('id');




// getting person name 
const userNameElement = messageDiv.querySelector('.name');
console.log(userNameElement);
const name = userNameElement.textContent.trim();
// getting image name 
const profilePic = messageDiv.querySelector('.profilePic');
let profilePicSrc = profilePic.src;
profilePicSrc = profilePicSrc.split('/');
const imageName = profilePicSrc[profilePicSrc.length - 1];

// create object to store in local Storage
const localUser = {
  name:name,
  profilePic:imageName,
  rid:rid
}
// setting data into local Storage
setLocalData(localUser);
alert('data set into localStorgae');
const data = getLocalData()
console.log(data);
window.location.href = `/chat/${rid}`

  }

})

})

    </script>
    
    <script src="/js/localStorage.js"></script>
  
 
