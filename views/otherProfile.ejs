



<main id="othersProfile" class=" rounded-xl fixed  left-0 right-0  top-0 bottom-0  justify-center py-4 flex flex-col items-center bg-blm transition-all duration-700 ease-in-out">
<a href="/messages" id="back" class="absolute left-6 top-5 cursor-pointer"> 
   <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6">
  <path fill-rule="evenodd" d="M7.72 12.53a.75.75 0 0 1 0-1.06l7.5-7.5a.75.75 0 1 1 1.06 1.06L9.31 12l6.97 6.97a.75.75 0 1 1-1.06 1.06l-7.5-7.5Z" clip-rule="evenodd" />
</svg></a>
  
  <div class="flex flex-col   bg-red text-blh  rounded-lg px-2 py-4 gap-2">
            <div class="  text-blm flex flex-col  justify-between items-center  py-1 px-4 gap-1 rounded-md" >

              <div class="border-2 border-blt rounded-full  overflow-hidden">
              <img id="profilePic" src="/img/<%= profilePic %>" alt="" class=" h-32 w-32 rounded-full border-2 border-blm "> 
          
              </div>
                  <div class="  flex w-full items-center justify-center flex-col ">
                    <h1 id="name" class= "font-[500]  text-black rounded-md   px-2 py-0.5"><%= name %></h1>
                    <p id="bio" class="text-sm text-blt  w-full max-w-72 text-center "><%= bio %></p>
                  </div>
            </div>
          <!-- Unique Id Section -->
          <div class="bg- flex items-center  justify-between px-6 py-3 ">
           
            <div class="flex text-black items-start gap-3">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6 ">
                <path fill-rule="evenodd" d="M12 3.75a6.715 6.715 0 0 0-3.722 1.118.75.75 0 1 1-.828-1.25 8.25 8.25 0 0 1 12.8 6.883c0 3.014-.574 5.897-1.62 8.543a.75.75 0 0 1-1.395-.551A21.69 21.69 0 0 0 18.75 10.5 6.75 6.75 0 0 0 12 3.75ZM6.157 5.739a.75.75 0 0 1 .21 1.04A6.715 6.715 0 0 0 5.25 10.5c0 1.613-.463 3.12-1.265 4.393a.75.75 0 0 1-1.27-.8A6.715 6.715 0 0 0 3.75 10.5c0-1.68.503-3.246 1.367-4.55a.75.75 0 0 1 1.04-.211ZM12 7.5a3 3 0 0 0-3 3c0 3.1-1.176 5.927-3.105 8.056a.75.75 0 1 1-1.112-1.008A10.459 10.459 0 0 0 7.5 10.5a4.5 4.5 0 1 1 9 0c0 .547-.022 1.09-.067 1.626a.75.75 0 0 1-1.495-.123c.041-.495.062-.996.062-1.503a3 3 0 0 0-3-3Zm0 2.25a.75.75 0 0 1 .75.75c0 3.908-1.424 7.485-3.781 10.238a.75.75 0 0 1-1.14-.975A14.19 14.19 0 0 0 11.25 10.5a.75.75 0 0 1 .75-.75Zm3.239 5.183a.75.75 0 0 1 .515.927 19.417 19.417 0 0 1-2.585 5.544.75.75 0 0 1-1.243-.84 17.915 17.915 0 0 0 2.386-5.116.75.75 0 0 1 .927-.515Z" clip-rule="evenodd" />
              </svg>
            
            <div class="flex text-black flex-col items-start gap-1">
            <h1 class=" text-xs">Unique Id</h1>
              <h1 id="uid" class="text-xs"><%= id %></h1>
            </div>
            </div>
           
            </div>
          <!-- Horizonatal line -->
          <div class="h-[1px] bg-blt mx-5 opacity-20 rounded-full "></div>
           <!-- Unique Id Section -->
           <div class=" flex items-center  justify-between px-2 pt-3">
              <div id="requestBtn" class="flex items-center justify-center gap-1 w-full py-1 px-2 rounded-md border border-blb text-blm bg-blf">
                <button id="" class="">Send Request</button>
              </div>
         
          
            </div>
         
          </div>

          
</main>
<%- include('blurBox.ejs') %>
<%- include('loader.ejs') %>
<%- include('warningBox.ejs') %>

<script>

  const sendRequest = document.getElementById('requestBtn');
  const uid = document.getElementById('uid');
  sendRequest.addEventListener('click',  (event) => {
    event.preventDefault(); // Prevent default form submission
    const id = uid.innerText.trim();
    // Assuming you have the data to send in a variable named 'content'
    
    fetch (`/requests/${id}`, {
        method: 'PATCH',
        headers: {
            'Content-Type': 'application/json; charset=UTF-8',
            'Accept': 'application/json'
        },
        
    }).then((data) => {
        console.log(data.status)
       return data.json();
    }).then((jsonData)=>{
if(jsonData.status === 'success'){
return successBox("Sent","Request has been sent successfully","/requests");
}
if(jsonData.message === 'YourSelf'){
  return fail("Fail","You can't send request to yourself","/messages");
}

if(jsonData.status === 'fail'){
  return fail("Fail","Please Enter a valid UID or Try Again","/messages");
}

})
.catch(err => {
  return fail("Fail","Please Enter a valid UID or Try Again","/messages");
})
})
   
</script>